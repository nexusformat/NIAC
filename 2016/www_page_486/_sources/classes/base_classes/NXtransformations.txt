.. auto-generated by script ../../../../utils/nxdl2rst.py from the NXDL source NXtransformations.nxdl.xml

.. index::
    ! NXtransformations (base class)
    ! transformations (base class)
    see: transformations (base class); NXtransformations

.. _NXtransformations:

=================
NXtransformations
=================

**Status**:

  base class, extends :ref:`NXobject`, version 1.0

**Description**:

  Collection of translations and rotations to describe a geometry

  A sequence of transformations lists the offset and rotation steps needed
  to describe the position and orientation of any movable or fixed device.

  This class will usually contain all axes of a sample stage or goniometer.

  The entry point (``depends_on``) will be outside of this class and point to a
  field in here. Following the chain may also require following ``depends_on`` 
  links to transformations outside, for example to a common base table.

  For a chain of three transformations, where :math:`T_1` depends on :math:`T_2`
  and that in turn depends on :math:`T_3`, the final transformation :math:`T_f` is

  .. math::

     T_f = T_3 T_2 T_1

  In explicit terms, the transformations are a subset of affine transformations
  expressed as 4x4 matrices that act on homogeneous coordinates, :math:`w=(x,y,z,1)^T`.

  For rotation and translation,

    .. math::

      T_r &= \left( \begin{matrix} R  & o \\
        0_3 & 1 \end{matrix} \right) \\
      T_t &= \left( \begin{matrix} I_3  & t + o \\
        0_3 & 1 \end{matrix} \right)

  where :math:`R` is the usual 3x3 rotation matrix, :math:`o` is an offset vector,
  :math:`0_3` is a row of 3 zeros, :math:`I_3` is the 3x3 identity matrix and
  :math:`t` is the translation vector.

  :math:`o` is given the ``offset`` attribute, :math:`t` is given by the ``vector``
  attribute multiplied by the field value, and :math:`R` is defined as a rotation
  about an axis in the direction of ``vector``, of angle of the field value.

**Symbols**:

  No symbol table

**Groups cited**:
  none

**Structure**:

  .. index:: TRANSFORMATION (field)

  **TRANSFORMATION**: :ref:`NX_NUMBER <NX_NUMBER>`

    Units need to be appropriate for translation or rotation

    The name of this field is not defined.  The user is free to use any name
    that does not cause confusion.  When using more than one TRANSFORMATION field,
    make sure that each field name is unique in the same group, as required
    by HDF5.

    .. index:: transformation type (field attribute)

    **@transformation_type**: :ref:`NX_CHAR <NX_CHAR>`


      Any of these values: ``translation`` | ``rotation``

    .. index:: vector (field attribute)

    **@vector**: :ref:`NX_NUMBER <NX_NUMBER>`

      Three values that define the axis for this transformation

    .. index:: offset (field attribute)

    **@offset**: :ref:`NX_NUMBER <NX_NUMBER>`

      A fixed offset applied before the transformation (three vector components).

    .. index:: offset units (field attribute)

    **@offset_units**: :ref:`NX_CHAR <NX_CHAR>`

      Units of the offset.

    .. index:: depends on (field attribute)

    **@depends_on**: :ref:`NX_CHAR <NX_CHAR>`

      Points to the name of the next element in the geometry chain.

**NXDL Source**:
  https://github.com/nexusformat/definitions/blob/master/base_classes/NXtransformations.nxdl.xml
